<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <title>Je t'aime Valentine</title>
    <link rel="stylesheet" href="style.css" />

</head>

<body>
    <div class="container">
        <div class="text">
            <div id="desktop">
                <h1 class="nickname"></h1>
                <h1 class="title">je t'aime depuis</h1>
                <h2 class="compteur"></h2>
                <h2 class="title"> et je t'aimerai jusqu'à la fin des temps.</h2>
            </div>
            <div id="mobile">
                <div class="module">
                    <div class="module__item__small"></div>
                    <div class="module__item">
                        <h1 class="nickname"></h1>
                    </div>
                    <div class="module__item">
                        <h1 class="title">je t'aime depuis</h1>
                    </div>
                    <div class="module__item">
                        <h2 class="compteur"></h2>
                    </div>
                    <div class="module__item">
                        <h2 class="title">et je t'aimerai jusqu'à</h2>
                    </div>
                    <div class="module__item">
                        <h2 class="title">la fin des temps.</h2>
                    </div>
                    <div class="module__item__small"></div>
                </div>
            </div>
        </div>





        <div class="first-heart">
        </div>
        <script src="anime.min.js"></script>
        <script>

            const nicknames = new Array('Mon coeur', 'Mon chat', 'Pancake', 'Ma vie', 'Mon amour', 'Ma chérie', 'Bébé d\'am\'s', 'Mon rayon de soleil');

            const container = document.querySelector('.container');

            for (var i = 1; i <= 125; i++) {
                const hearts = document.createElement('div');
                if (i % 2 == 0) {
                    hearts.classList.add('heart');

                }
                else {
                    hearts.classList.add('heart-pink');
                }

                container.appendChild(hearts);
            }

            function isMobile() {
                if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                    return true;
                } else {
                    return false;
                }
            }

            function inLandscape() {
                if (window.matchMedia("(orientation: landscape)").matches) {
                    return true;
                }
                else {
                    return false;
                }
            }

            function animateHearts() {
                var w = window.innerWidth / 2;
                var h = window.innerHeight / 2;
                anime({
                    targets: ['.heart-pink', '.heart'],
                    translateX: function () {
                        return anime.random(-w, w);
                    },
                    translateY: function () {
                        return anime.random(-h, h);
                    },
                    rotate: 45,
                    scale: function () {
                        return anime.random(1, 5);
                    },
                    easing: 'easeInOutBack',
                    duration: 3000,
                    delay: anime.stagger(10),
                    complete: animateHearts
                })
            }

            function calcDate() {
    
                const meetingDate = Date.parse('05 Jul 2022 00:00:00 GMT');
                const dateNow = Date.now();

                const calc = dateNow - meetingDate;
                var gap = new Date(calc);

                const secondes_passed = gap.getSeconds();
                const minutes_passed = gap.getMinutes();
                const hours_passed = gap.getHours();
                const days_passed = gap.getDay();
                const months_passed = gap.getMonth();
                const years_passed = gap.getYear()-70;
                //Set up custom text
                const yrsTxt = ["an", "ans"];
                const mnthsTxt = ["mois", "mois"];
                const daysTxt = ["jour", "jours"];
                const hoursTxt = ["heure", "heures"];
                const minutesTxt = ["minute", "minutes"];
                const secondesTxt = ["seconde", "secondes"]

                //display result with custom text
                const result = ((years_passed == 1) ? years_passed + ' ' + yrsTxt[0] + ' ' : (years_passed > 1) ?
                    years_passed + ' ' + yrsTxt[1] + ' ' : '') +
                    ((months_passed == 1) ? months_passed + ' ' + mnthsTxt[0] : (months_passed > 1) ?
                        months_passed + ' ' + mnthsTxt[1] + ' ' : '') +
                    ((days_passed == 1) ? days_passed + ' ' + daysTxt[0] : (days_passed > 1) ?
                        days_passed + ' ' + daysTxt[1] + ' ' : '') +
                    ((hours_passed == 1) ? hours_passed + ' ' + hoursTxt[0] : (hours_passed > 1) ?
                        hours_passed + ' ' + hoursTxt[1] + ' ' : '') +
                    ((isMobile() == true) ? '<br/>' : '') +
                    ((minutes_passed == 1) ? minutes_passed + ' ' + minutesTxt[0] : (minutes_passed > 1) ?
                        minutes_passed + ' ' + minutesTxt[1] + ' ' : '') +
                    ((secondes_passed == 1) ? secondes_passed + ' ' + secondesTxt[0] : (secondes_passed > 1) ?
                        secondes_passed + ' ' + secondesTxt[1] : '');


                document.getElementsByClassName('compteur')[0].innerHTML = result.trim();
                document.getElementsByClassName('compteur')[1].innerHTML = result.trim();
            }

            function getRandomInt(max) {
                return Math.floor(Math.random() * max);
            }

            function getNickname() {
                document.getElementsByClassName('nickname')[0].innerHTML = nicknames[getRandomInt(nicknames.length - 1)];
                document.getElementsByClassName('nickname')[1].innerHTML = nicknames[getRandomInt(nicknames.length - 1)];
            }

            function showDivForDevice() {
                if (isMobile()) {
                    document.getElementById("desktop").style.display = "none";
                    document.getElementById("mobile").style.display = "visible";
                } else {
                    document.getElementById("desktop").style.display = "visible";
                    document.getElementById("mobile").style.display = "none";
                }
            }

            function turnMobile() {
                if (isMobile()) {

                    if (inLandscape()) {
                        var nodes = document.querySelectorAll('.module__item__small');
                        for (var i = 0; i < nodes.length; i++) {
                            nodes[i].style.height = '10%';
                        }

                        var nodes = document.querySelectorAll('.module__item');
                        for (var i = 0; i < nodes.length; i++) {
                            nodes[i].style.height = '20%';
                        }

                        var nodes = document.querySelectorAll('.title');
                        for (var i = 0; i < nodes.length; i++) {
                            nodes[i].style.fontSize = '45px';
                        }

                        var nodes = document.querySelectorAll('.compteur');
                        for (var i = 0; i < nodes.length; i++) {
                            nodes[i].style.fontSize = '45px';
                        }

                        var nodes = document.querySelectorAll('.nickname');
                        for (var i = 0; i < nodes.length; i++) {
                            nodes[i].style.fontSize = '100px';
                        }
                    }
                    else {
                        var nodes = document.querySelectorAll('.module__item__small');
                        for (var i = 0; i < nodes.length; i++) {
                            nodes[i].style.height = '26%';
                        }

                        var nodes = document.querySelectorAll('.module__item');
                        for (var i = 0; i < nodes.length; i++) {
                            nodes[i].style.height = '12%';
                        }

                        var nodes = document.querySelectorAll('.title');
                        for (var i = 0; i < nodes.length; i++) {
                            nodes[i].style.fontSize = '55px';
                        }

                        var nodes = document.querySelectorAll('.compteur');
                        for (var i = 0; i < nodes.length; i++) {
                            nodes[i].style.fontSize = '55px';
                        }

                        var nodes = document.querySelectorAll('.nickname');
                        for (var i = 0; i < nodes.length; i++) {
                            nodes[i].style.fontSize = '110px';
                        }
                    }
                }
            }

            getNickname();
            calcDate();
            animateHearts();
            showDivForDevice();
            turnMobile();
            const chronoInterval = setInterval(() => { calcDate() }, 1000);
            const nicknameInterval = setInterval(() => { getNickname() }, 2500);


            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);

            window.addEventListener('resize', () => {
                let vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
                turnMobile();
            });



        </script>
</body>

</html>
